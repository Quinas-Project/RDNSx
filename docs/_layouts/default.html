<!DOCTYPE html>
<html lang="{{ page.lang | default: site.lang | default: "en" }}">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Primary Meta Tags -->
  <title>{% if page.title %}{{ page.title }} | {% endif %}{{ site.title }}</title>
  <meta name="title" content="{% if page.title %}{{ page.title }} | {% endif %}{{ site.title }}">
  <meta name="description" content="{{ page.description | default: page.excerpt | default: site.description | strip_html | normalize_whitespace | truncate: 160 }}">
  <meta name="keywords" content="{{ page.keywords | default: site.keywords | join: ', ' }}">
  <meta name="author" content="{{ page.author | default: site.author }}">
  <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1">

  <!-- Canonical URL -->
  <link rel="canonical" href="{{ page.url | absolute_url }}">

  <!-- Favicon and App Icons -->
  <link rel="icon" type="image/x-icon" href="{{ '/assets/images/favicon.ico' | relative_url }}">
  <link rel="apple-touch-icon" sizes="180x180" href="{{ '/assets/images/apple-touch-icon.png' | relative_url }}">
  <link rel="icon" type="image/png" sizes="32x32" href="{{ '/assets/images/favicon-32x32.png' | relative_url }}">
  <link rel="icon" type="image/png" sizes="16x16" href="{{ '/assets/images/favicon-16x16.png' | relative_url }}">

  <!-- PWA Manifest -->
  <link rel="manifest" href="{{ '/manifest.json' | relative_url }}">

  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="{{ page.url | absolute_url }}">
  <meta property="og:title" content="{% if page.title %}{{ page.title }} | {% endif %}{{ site.title }}">
  <meta property="og:description" content="{{ page.description | default: page.excerpt | default: site.description | strip_html | normalize_whitespace | truncate: 160 }}">
  <meta property="og:image" content="{{ page.og_image | default: site.og_image | absolute_url }}">
  <meta property="og:site_name" content="{{ site.seo.site_name | default: site.title }}">
  <meta property="og:locale" content="{{ site.locale | default: 'en_US' }}">

  <!-- Twitter -->
  <meta property="twitter:card" content="{{ site.twitter.card | default: 'summary_large_image' }}">
  <meta property="twitter:url" content="{{ page.url | absolute_url }}">
  <meta property="twitter:title" content="{% if page.title %}{{ page.title }} | {% endif %}{{ site.title }}">
  <meta property="twitter:description" content="{{ page.description | default: page.excerpt | default: site.description | strip_html | normalize_whitespace | truncate: 160 }}">
  <meta property="twitter:image" content="{{ page.og_image | default: site.og_image | absolute_url }}">
  {% if site.twitter.username -%}
  <meta property="twitter:site" content="{{ site.twitter.username }}">
  <meta property="twitter:creator" content="{{ site.twitter.username }}">
  {%- endif %}

  <!-- Additional Meta Tags -->
  <meta name="theme-color" content="#2f363d">
  <meta name="msapplication-TileColor" content="#2f363d">
  <meta name="application-name" content="{{ site.title }}">

  <!-- Structured Data - JSON-LD -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@graph": [
      {
        "@type": "WebSite",
        "@id": "{{ site.url }}/#website",
        "url": "{{ site.url }}",
        "name": "{{ site.title }}",
        "description": "{{ site.description }}",
        "publisher": {
          "@id": "{{ site.url }}/#organization"
        },
        "potentialAction": {
          "@type": "SearchAction",
          "target": {
            "@type": "EntryPoint",
            "urlTemplate": "{{ site.url }}/search?q={search_term_string}"
          },
          "query-input": "required name=search_term_string"
        },
        "inLanguage": "{{ site.lang | default: 'en-US' }}"
      },
      {
        "@type": "Organization",
        "@id": "{{ site.url }}/#organization",
        "name": "{{ site.social.name | default: site.author }}",
        "url": "{{ site.url }}",
        "logo": {
          "@type": "ImageObject",
          "inLanguage": "{{ site.lang | default: 'en-US' }}",
          "@id": "{{ site.url }}/#logo",
          "url": "{{ site.logo | absolute_url }}",
          "contentUrl": "{{ site.logo | absolute_url }}",
          "width": 512,
          "height": 512,
          "caption": "{{ site.social.name | default: site.author }}"
        },
        "image": {
          "@id": "{{ site.url }}/#logo"
        },
        "sameAs": {{ site.social.links | jsonify }}
      },
      {
        "@type": "SoftwareApplication",
        "@id": "{{ site.url }}/#softwareapplication",
        "name": "{{ site.software.name }}",
        "description": "{{ site.software.description }}",
        "url": "{{ site.repository | prepend: 'https://github.com/' }}",
        "applicationCategory": "{{ site.software.application_category }}",
        "operatingSystem": "{{ site.software.operating_system }}",
        "programmingLanguage": "{{ site.software.programming_language }}",
        "softwareVersion": "{{ site.software.version }}",
        "author": {
          "@id": "{{ site.url }}/#organization"
        },
        "offers": {
          "@type": "Offer",
          "price": "{{ site.software.offers.price }}",
          "priceCurrency": "{{ site.software.offers.price_currency }}"
        },
        "aggregateRating": {
          "@type": "AggregateRating",
          "ratingValue": "{{ site.software.aggregate_rating.rating_value }}",
          "reviewCount": "{{ site.software.aggregate_rating.review_count }}"
        },
        "featureList": [
          "DNS Record Enumeration",
          "ASN Information Lookup",
          "Reverse DNS (PTR) Queries",
          "Subdomain Bruteforce",
          "DNSSEC Analysis",
          "CDN Detection",
          "Email Security Analysis",
          "Database Export Support"
        ]
      },
      {
        "@type": "WebPage",
        "@id": "{{ page.url | absolute_url }}",
        "url": "{{ page.url | absolute_url }}",
        "name": "{% if page.title %}{{ page.title }} | {% endif %}{{ site.title }}",
        "description": "{{ page.description | default: page.excerpt | default: site.description | strip_html | normalize_whitespace | truncate: 160 }}",
        "isPartOf": {
          "@id": "{{ site.url }}/#website"
        },
        "about": {
          "@id": "{{ site.url }}/#organization"
        },
        "primaryImageOfPage": {
          "@type": "ImageObject",
          "@id": "{{ page.og_image | default: site.og_image | absolute_url }}"
        },
        "datePublished": "{{ page.date | date_to_xmlschema }}",
        "dateModified": "{{ page.last_modified_at | date_to_xmlschema | default: page.date | date_to_xmlschema }}",
        "inLanguage": "{{ page.lang | default: site.lang | default: 'en-US' }}",
        "potentialAction": [
          {
            "@type": "ReadAction",
            "target": ["{{ page.url | absolute_url }}"]
          }
        ]
      }
    ]
  }
  </script>

  <!-- Jekyll SEO Plugin -->
  {%- seo -%}

  <!-- Performance Optimizations -->
  {%- include performance.html -%}

  <!-- Fallback Stylesheet -->
  <link rel="stylesheet" href="{{ "/assets/css/style.css?v=" | append: site.github.build_revision | relative_url }}" media="print" onload="this.media='all'; this.onload=null;">

  <!-- RSS Feed -->
  {%- feed_meta -%}
</head>
<body>
  {%- include header.html -%}

  <div class="container-lg px-3 my-5 markdown-body">
    {% unless page.layout == 'home' %}
      {% include breadcrumbs.html %}
    {% endunless %}

    {{ content }}
  </div>

  {%- include footer.html -%}

  {%- if jekyll.environment == 'production' -%}
    <script src="{{ '/assets/js/scale.fix.js' | relative_url }}"></script>
    <!-- Service Worker Registration -->
    <script>
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', function() {
          navigator.serviceWorker.register('{{ "/sw.js" | relative_url }}')
            .then(function(registration) {
              console.log('ServiceWorker registration successful with scope: ', registration.scope);
            }, function(err) {
              console.log('ServiceWorker registration failed: ', err);
            });
        });
      }
    </script>
    <!-- Image Optimization -->
    {%- include image-optimizer.html -%}
    <!-- Search Functionality -->
    {%- include search.html -%}
  {%- endif -%}
</body>
</html>